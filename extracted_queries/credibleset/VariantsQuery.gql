# Query Name: VariantsQuery
# Entity Type: credibleset
# Description:
# Fetches paginated variants within a credible set, including variant details,
#  statistical measures (p-values, beta, standard error), fine-mapping metrics
#  (posterior probability, log Bayes Factor), linkage disequilibrium, and
#  variant consequences for display in a sortable table.
# Variables: studyLocusId: String!, size: Int!, index: Int!
# Pagination Behavior: Paginated (uses page parameter with size and index, returns count field)
# Notes:
# Query successfully tested with
#  studyLocusId=7d68cc9c70351c9dbd2a2c0c145e555d. Returns count=2 variants
#  total. Uses standard pagination with page.size and page.index parameters.
#  Returns lead variant info separately at top level and paginated locus
#  variants with full statistical details including logBF,
#  posteriorProbability, beta, standardError, r2Overall, and
#  mostSevereConsequence.
#
# Last Updated: 2025-11-21
query VariantsQuery($studyLocusId: String!, $size: Int!, $index: Int!) {
  # Return a Credible Set
  credibleSet(studyLocusId: $studyLocusId) {
    variant {
      id
      referenceAllele
      alternateAllele
    }
    studyLocusId
    locus(page: { size: $size, index: $index }) {
      count
      rows {
        logBF
        posteriorProbability
        variant {
          id
          chromosome
          position
          referenceAllele
          alternateAllele
          # Most severe consequence sequence ontology
          mostSevereConsequence {
            id
            label
          }
        }
        pValueMantissa
        pValueExponent
        beta
        standardError
        r2Overall
      }
    }
  }
}
