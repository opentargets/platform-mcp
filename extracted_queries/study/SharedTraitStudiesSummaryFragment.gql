# Query Name: SharedTraitStudiesSummaryFragment
# Entity Type: study
# Description:
# Retrieves the count of studies sharing the same disease/phenotype traits as
#  a given study. Used by Summary component to display a count badge for the
#  Shared Trait Studies section. Requires both study information and disease
#  IDs.
# Variables:
# studyId: String! (Example: GCST90002357), diseaseIds: [String!]! (Example:
#  ['EFO_0004309'])
# Pagination Behavior: Full results
# Notes:
# Originally a fragment used at root query level alongside study query. Query
#  successfully tested with GCST90002357 and diseaseIds ['EFO_0004309']
#  (platelet count), returned count=89 studies sharing the trait. Uses minimal
#  page parameters (size=2, index=0) for studies query to efficiently retrieve
#  only the count. Requires two variables: studyId for basic study info and
#  diseaseIds array obtained from study.diseases[].id. Returns study basic
#  info (id, diseases array with id/name) plus root-level sharedTraitStudies
#  count. Used in Profile component
#  (apps/platform/src/pages/StudyPage/Profile.tsx) and Summary component to
#  display count badge. Query pattern includes both study query for context
#  and root-level studies query (aliased as sharedTraitStudies) filtered by
#  disease IDs. Related to full SharedTraitStudiesQuery.gql which fetches
#  detailed study information including publication metadata, cohorts, and LD
#  population structure with pagination support (size parameter defaults to
#  500).
#
# Last Updated: 2025-11-21
query SharedTraitStudiesSummaryFragment($studyId: String!, $diseaseIds: [String!]!) {
  # Return a Study
  study(studyId: $studyId) {
    # The study identifier
    id
    diseases {
      # Open Targets disease id
      id
      # Disease name
      name
    }
  }
  # Return a studies
  sharedTraitStudies: studies(diseaseIds: $diseaseIds, page: { size: 2, index: 0 }) {
    count
  }
}
