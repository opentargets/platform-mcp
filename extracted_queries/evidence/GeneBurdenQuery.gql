# Query Name: GeneBurdenQuery
# Entity Type: evidence
# Description:
# Retrieves gene burden evidence for a target-disease association, including
#  rare variant burden analysis data with statistical measures (p-values, odds
#  ratios, beta values), cohort information, ancestry, and allelic
#  requirements from studies like Genebass, Epi25, SCHEMA consortium
# Variables:
# ensemblId: String!, efoId: String!, size: Int! (Example: 3500 from
#  sectionsBaseSizeQuery)
# Pagination Behavior: Paginated (uses size parameter, returns count and rows fields)
# Notes:
# Query executes successfully with valid syntax. Tested with BRAF
#  (ENSG00000157764) + melanoma (EFO_0000756), returned count=0 indicating
#  sparse data coverage. Gene burden data is more common for
#  neurodevelopmental/neurological diseases (epilepsy, autism, schizophrenia)
#  from sources like Genebass, Epi25 collaborative, Autism Sequencing
#  Consortium, SCHEMA consortium, and AstraZeneca PheWAS Portal. Returns
#  comprehensive burden test data including studyId, cohortId/projectId (e.g.,
#  Epi25, Genebass), ancestry/ancestryId, statistical methods (model),
#  allelicRequirements (inheritance patterns), sample statistics (studyCases,
#  studyCasesWithQualifyingVariants, studySampleSize), effect sizes (oddsRatio
#  with 95% CI, beta with 95% CI), p-values (mantissa/exponent format),
#  directionOnTrait/variantEffect for direction of effect analysis,
#  targetFromSourceId, and literature PMIDs. Uses standard pagination with
#  size parameter (default 3500 in app from sectionsBaseSizeQuery constant).
#  enableIndirect=true to include related diseases. Related to
#  GeneBurdenSummaryFragment.gql which fetches only count for summary display.
#  OtTable component provides client-side pagination/filtering of results.
#
# Last Updated: 2025-11-21
query GeneBurdenQuery($ensemblId: String!, $efoId: String!, $size: Int!) {
  # Return a Disease
  disease(efoId: $efoId) {
    # Open Targets disease id
    id
    # The complete list of all possible datasources
    geneBurdenSummary: evidences(
      ensemblIds: [$ensemblId]
      enableIndirect: true
      datasourceIds: ["gene_burden"]
      size: $size
    ) {
      count
      rows {
        # Disease evidence
        disease {
          # Open Targets disease id
          id
          # Disease name
          name
        }
        diseaseFromSource
        # Target evidence
        target {
          # Open Targets target id
          id
          # HGNC approved symbol
          approvedSymbol
        }
        # Release version
        releaseVersion
        targetFromSourceId
        urls {
          url
        }
        # Variant effect
        variantEffect
        # Direction On Trait
        directionOnTrait
        allelicRequirements
        studyId
        # Genetic origin of a population
        ancestry
        # Identifier of the ancestry in the HANCESTRO ontology
        ancestryId
        resourceScore
        cohortId
        projectId
        # The statistical method used to calculate the association
        statisticalMethod
        # Overview of the statistical method used to calculate the association
        statisticalMethodOverview
        studyCases
        # Number of cases in a case-control study that carry at least one allele of the qualifying variant
        studyCasesWithQualifyingVariants
        # Sample size
        studySampleSize
        oddsRatio
        # Confidence interval lower-bound
        oddsRatioConfidenceIntervalLower
        oddsRatioConfidenceIntervalUpper
        beta
        betaConfidenceIntervalLower
        betaConfidenceIntervalUpper
        pValueMantissa
        pValueExponent
        # list of pub med publications ids
        literature
      }
    }
  }
}
