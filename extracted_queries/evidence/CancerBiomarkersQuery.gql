# Query Name: CancerBiomarkersQuery
# Entity Type: evidence
# Description:
# Retrieves cancer biomarker evidence linking a target gene to a disease,
#  including biomarker details (genetic variations, gene expression),
#  associated drugs, drug responses, confidence levels, and literature
#  references
# Variables: ensemblId: String!, efoId: String!, size: Int!
# Pagination Behavior: Paginated (returns 25/page, total varies)
# Notes:
# Query executes successfully. Tested with BRAF (ENSG00000157764) and melanoma
#  (EFO_0000756). Returns count=29 with 25 rows retrieved. Includes detailed
#  biomarker information with genetic variations, drugs (e.g., Vemurafenib,
#  Dabrafenib), confidence levels (FDA guidelines, NCCN guidelines, case
#  reports), and literature references.
#
# Last Updated: 2025-11-21
query CancerBiomarkersQuery($ensemblId: String!, $efoId: String!, $size: Int!) {
  # Return a Disease
  disease(efoId: $efoId) {
    # Open Targets disease id
    id
    # The complete list of all possible datasources
    cancerBiomarkersSummary: evidences(
      ensemblIds: [$ensemblId]
      enableIndirect: true
      datasourceIds: ["cancer_biomarkers"]
      size: $size
    ) {
      count
      rows {
        # Disease evidence
        disease {
          # Open Targets disease id
          id
          # Disease name
          name
        }
        diseaseFromSource
        biomarkerName
        biomarkers {
          geneticVariation {
            geneticVariationId: id
            name
            functionalConsequenceId {
              id
              label
            }
          }
          geneExpression {
            name
            id {
              id
              name
            }
          }
        }
        drugFromSource
        drug {
          # Open Targets molecule id
          id
          # Molecule preferred name
          name
        }
        drugResponse {
          # Open Targets disease id
          id
          # Disease name
          name
        }
        confidence
        # list of pub med publications ids
        literature
        urls {
          niceName
          url
        }
      }
    }
  }
}
