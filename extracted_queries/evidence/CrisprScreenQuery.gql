# Query Name: CrisprScreenQuery
# Entity Type: evidence
# Description:
# Fetches CRISPR screen evidence for a target-disease association, including
#  study details, cell type, fold change, and significance scores from pooled
#  CRISPR knockout screens
# Variables: ensemblId: String!, efoId: String!, size: Int!
# Pagination Behavior: Paginated (returns X/page, total varies)
# Notes:
# Query executes successfully with valid syntax. Tested with ENSG00000157764
#  (BRAF) and EFO_0000756 (melanoma) - returns count=0, indicating sparse data
#  coverage for CRISPR screens. Uses enableIndirect=true and
#  datasourceIds=['crispr_screen']. Typical size=3500 from
#  sectionsBaseSizeQuery constant.
#
# Last Updated: 2025-11-21
query CrisprScreenQuery($ensemblId: String!, $efoId: String!, $size: Int!) {
  # Return a Disease
  disease(efoId: $efoId) {
    # Open Targets disease id
    id
    # The complete list of all possible datasources
    CrisprScreenSummary: evidences(
      ensemblIds: [$ensemblId]
      enableIndirect: true
      datasourceIds: ["crispr_screen"]
      size: $size
    ) {
      count
      rows {
        studyId
        datatypeId
        datasourceId
        projectId
        crisprScreenLibrary
        studyOverview
        cellType
        # list of pub med publications ids
        literature
        diseaseFromSource
        diseaseFromSourceMappedId
        contrast
        targetFromSourceId
        resourceScore
        statisticalTestTail
        log2FoldChangeValue
      }
    }
  }
}
