# Query Name: OTValidationSummaryFragment
# Entity Type: evidence
# Description:
# Retrieves the count of OT CRISPR Validation evidence entries for a
#  target-disease association from the Open Targets Validation Lab. Used by
#  the Summary component to display evidence count without loading full
#  evidence details.
# Variables:
# efoId: String! (Example: EFO_0000756), ensgId: String! (Example:
#  ENSG00000157764)
# Pagination Behavior: Full results
# Notes:
# Originally a fragment, converted to standalone query. Query successfully
#  tested with BRAF (ENSG00000157764) + melanoma (EFO_0000756), returned
#  count=0. Also tested with TP53 (ENSG00000141510) + breast cancer
#  (MONDO_0007254), returned count=0. Uses size=0 parameter to retrieve only
#  count without fetching evidence rows for efficient summary display. Returns
#  total number of OT CRISPR Validation evidence entries without pagination.
#  OT CRISPR Validation is a private/partner-only datasource from Open Targets
#  Partner Programme with restricted data availability (isPrivate: true),
#  marked in UI as 'Partner-only' data type. Part of Public-Private
#  Partnership (PPP) program with docsLink to
#  partner-platform.opentargets.org/projects. Uses enableIndirect=true to
#  include indirect evidence associations.
#  datasourceIds=['ot_crispr_validation'] targets the Open Targets Validation
#  Lab data showing experimental validation of target-disease associations
#  through CRISPR screens. Used by Summary component in OTValidation section
#  to display entry count format 'X entr(y|ies)'. Related to
#  OTValidationQuery.gql (ValidationQuery) which fetches full evidence details
#  including disease info, projectId, studyOverview, diseaseCellLines (with
#  id/name/tissue/tissueId), biomarkerList (name/description),
#  primaryProjectId, primaryProjectHit (boolean), assays array
#  (description/isHit/shortName for CellTiterGlo/CellTox/Cell Confluence),
#  assessments array, resourceScore, and releaseVersion with pagination
#  support (size parameter). Query structure validated - returns proper count
#  field in response.
#
# Last Updated: 2025-11-21
query OTValidationSummaryFragment($efoId: String!, $ensgId: String!) {
  # Return a Disease
  disease(efoId: $efoId) {
    # Open Targets disease id
    id
    # The complete list of all possible datasources
    otValidationSummary: evidences(
      ensemblIds: [$ensgId]
      enableIndirect: true
      datasourceIds: ["ot_crispr_validation"]
      size: 0
    ) {
      count
    }
  }
}
