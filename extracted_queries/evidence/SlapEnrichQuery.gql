# Query Name: SlapEnrichQuery
# Entity Type: evidence
# Description:
# Fetches SLAPenrich evidence linking a gene to a disease through enriched
#  pathways. Returns evidence showing significant pathway associations with
#  disease phenotypes. SLAPenrich enriches significantly associated genes from
#  GWAS studies.
# Variables:
# ensemblId: String! (Example: ENSG00000157764), efoId: String! (Example:
#  EFO_0000756), size: Int! (Example: 3500)
# Pagination Behavior: Paginated (batch: 3500/page by default)
# Notes:
# Query successfully tested with BRAF (ENSG00000157764) + melanoma
#  (EFO_0000756), returned count=12 with evidence for cutaneous melanoma
#  (EFO_0000389) showing various MAPK and FGFR signaling pathways. Uses
#  size-based limiting where size parameter controls maximum number of rows
#  returned. Default size is 3500 (sectionsBaseSizeQuery constant). Returns
#  count field showing total matches and rows array with evidence. Query uses
#  enableIndirect=true to include indirect disease associations and
#  datasourceIds=['slapenrich'] to filter to SLAPenrich data source. Response
#  includes disease (id, name like 'cutaneous melanoma'), diseaseFromSource
#  (original disease code like 'SKCM'), pathways array (id, name for Reactome
#  pathways like 'Negative feedback regulation of MAPK pathway' R-HSA-5358565,
#  'Signaling by FGFR3', 'RAF activation'), and resourceScore (p-value in
#  scientific notation like 4.19E-16). All 12 evidence rows showed pathway
#  associations with highly significant p-values. No fragments to inline -
#  self-contained query. Related to SlapEnrichSummaryFragment.gql which
#  fetches only count for summary display. SLAPenrich provides pathway-level
#  evidence from GWAS-based gene enrichment analysis.
#
# Last Updated: 2025-11-21
query SlapEnrichQuery($ensemblId: String!, $efoId: String!, $size: Int!) {
  # Return a Disease
  disease(efoId: $efoId) {
    # Open Targets disease id
    id
    # The complete list of all possible datasources
    slapEnrich: evidences(
      ensemblIds: [$ensemblId]
      enableIndirect: true
      datasourceIds: ["slapenrich"]
      size: $size
    ) {
      count
      rows {
        # Disease evidence
        disease {
          # Open Targets disease id
          id
          # Disease name
          name
        }
        diseaseFromSource
        pathways {
          id
          name
        }
        resourceScore
      }
    }
  }
}
