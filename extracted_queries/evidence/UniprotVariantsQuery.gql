# Query Name: UniprotVariantsQuery
# Entity Type: evidence
# Description:
# Fetches evidence from UniProt variants linking a target to a disease. Shows
#  genetic variants from UniProt's disease-related variant annotations,
#  including variant details, amino acid changes, rsIDs, confidence levels,
#  and supporting literature.
# Variables:
# ensemblId: String! (Example: ENSG00000012048), efoId: String! (Example:
#  MONDO_0007254), size: Int! (Example: 3500)
# Pagination Behavior: Paginated (batch: 3500/page by default)
# Notes:
# Query validated successfully with correct structure. Tested with BRAF
#  (ENSG00000157764) + melanoma (EFO_0000756), returned count=0 indicating
#  sparse coverage for this pair. Also tested with BRCA1 (ENSG00000012048) +
#  breast cancer (MONDO_0007254), returned count=118 total (50 rows with
#  size=50) confirming query works with actual data. Uses size-based
#  pagination where size parameter controls maximum number of rows returned.
#  Default size is 3500 (sectionsBaseSizeQuery constant). Returns count field
#  showing total matches and rows array with evidence. Query uses
#  enableIndirect=true to include indirect disease associations and
#  datasourceIds=['uniprot_variants'] to filter to UniProt variants data.
#  Response includes target.approvedSymbol, disease (id, name),
#  diseaseFromSource (original disease name from UniProt like 'Breast
#  cancer'), targetFromSourceId (UniProt protein accession like P38398),
#  variant object (id in chr_pos_ref_alt format, chromosome, position,
#  referenceAllele, alternateAllele, transcriptConsequences array with
#  aminoAcidChange like 'V271L'), variantRsId (dbSNP rs identifier like
#  rs80357244), confidence (high/medium/low), and literature (array of PubMed
#  IDs). Some evidence records may have null variant objects. No fragments to
#  inline - self-contained query. Related to
#  UniprotVariantsSummaryFragment.gql which fetches only count for summary
#  display. UniProt variants provides disease-associated genetic variants with
#  amino acid changes and functional annotations. Data availability varies by
#  gene-disease pair - well-studied genetic disorders have richer variant
#  annotations.
#
# Last Updated: 2025-11-21
query UniprotVariantsQuery($ensemblId: String!, $efoId: String!, $size: Int!) {
  # Return a Target
  target(ensemblId: $ensemblId) {
    # HGNC approved symbol
    approvedSymbol
  }
  # Return a Disease
  disease(efoId: $efoId) {
    # Open Targets disease id
    id
    # The complete list of all possible datasources
    uniprotVariantsSummary: evidences(
      ensemblIds: [$ensemblId]
      enableIndirect: true
      datasourceIds: ["uniprot_variants"]
      size: $size
    ) {
      count
      rows {
        # Disease evidence
        disease {
          # Open Targets disease id
          id
          # Disease name
          name
        }
        diseaseFromSource
        targetFromSourceId
        variant {
          id
          chromosome
          position
          referenceAllele
          alternateAllele
          transcriptConsequences {
            aminoAcidChange
          }
        }
        # Variant dbSNP identifier
        variantRsId
        confidence
        # list of pub med publications ids
        literature
      }
    }
  }
}
