# Query Name: Gene2PhenotypeSummaryFragment
# Entity Type: evidence
# Description:
# Retrieves the count of Gene2Phenotype evidence entries for a target-disease
#  pair, used to show evidence availability in the summary panel
# Variables: efoId: String!, ensgId: String!
# Pagination Behavior: Full results (count-only query)
# Notes:
# Originally a fragment on Disease type, converted to standalone query. Uses
#  size: 0 to only return count. Tested with BRAF+melanoma (count=0).
#  Underlying evidences() endpoint supports pagination when size > 0.
#
# Last Updated: 2025-11-21
query Gene2PhenotypeSummaryFragment(
  $efoId: String!
  $ensgId: String!
) {
  # Return a Disease
  disease(efoId: $efoId) {
    # Open Targets disease id
    id
    # The complete list of all possible datasources
    gene2Phenotype: evidences(
      ensemblIds: [$ensgId]
      enableIndirect: true
      datasourceIds: ["gene2phenotype"]
      size: 0
    ) {
      count
    }
  }
}
