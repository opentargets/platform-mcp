# Query Name: ProgenyQuery
# Entity Type: evidence
# Description:
# Fetches PROGENy pathway activity evidence for a target-disease association,
#  including significant pathways and p-values. PROGENy (Pathway RespOnsive
#  GENes) provides evidence from pathway perturbation experiments.
# Variables:
# ensemblId: String! (Example: ENSG00000157764), efoId: String! (Example:
#  EFO_0000756), size: Int! (Example: 3500)
# Pagination Behavior: Paginated (batch: 3500/page by default)
# Notes:
# Query successfully tested with BRAF (ENSG00000157764) + melanoma
#  (EFO_0000756), returned count=0. Also tested with TP53 (ENSG00000141510) +
#  breast cancer (EFO_0000305), returned count=1 with evidence for breast
#  adenocarcinoma showing pathway 'p53-Dependent G1 DNA damage Response'
#  (R-HSA-69563) with p-value 4.89e-50. Uses size-based limiting (not
#  cursor/offset pagination) where size parameter controls maximum number of
#  rows returned. Default size is 3500 (sectionsBaseSizeQuery constant).
#  Returns count field showing total matches and rows array with evidence.
#  Query uses enableIndirect=true to include indirect disease associations and
#  datasourceIds=['progeny'] to filter to PROGENy data source. Response
#  includes disease (id, name), diseaseFromSource (original disease code),
#  pathways array (id, name for Reactome pathways), and resourceScore (p-value
#  in scientific notation). PROGENy data appears sparse/selective in database
#  - not all target-disease pairs have evidence. Related to ProgenySummary.gql
#  fragment which fetches only count for summary display. No fragments to
#  inline - self-contained query.
#
# Last Updated: 2025-11-21
query ProgenyQuery($ensemblId: String!, $efoId: String!, $size: Int!) {
  # Return a Disease
  disease(efoId: $efoId) {
    # Open Targets disease id
    id
    # The complete list of all possible datasources
    progeny: evidences(
      ensemblIds: [$ensemblId]
      enableIndirect: true
      datasourceIds: ["progeny"]
      size: $size
    ) {
      count
      rows {
        # Disease evidence
        disease {
          # Open Targets disease id
          id
          # Disease name
          name
        }
        diseaseFromSource
        pathways {
          id
          name
        }
        resourceScore
      }
    }
  }
}
