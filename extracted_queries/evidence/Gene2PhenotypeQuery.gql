# Query Name: Gene2PhenotypeQuery
# Entity Type: evidence
# Description:
# Fetches Gene2Phenotype evidence for a target-disease association, including
#  disease information, allelic requirements, confidence levels, variant
#  functional consequences, and literature references from the Gene2Phenotype
#  rare disease database
# Variables:
# ensemblId: String! (Example: ENSG00000198947 for DMD), efoId: String!
#  (Example: EFO_0000508 for cardiomyopathy), size: Int! (Example: 100)
# Pagination Behavior: Paginated (returns X/page based on size parameter, total varies)
# Notes:
# Query executes successfully. Tested with DMD (ENSG00000198947) +
#  cardiomyopathy (EFO_0000508), returned count=1 with definitive confidence
#  evidence. Gene2Phenotype is a rare disease database with sparse coverage -
#  common cancer associations like BRAF+melanoma return count=0. Evidence
#  includes allelicRequirements (e.g., monoallelic_X_hemizygous), confidence
#  levels (definitive/strong/moderate), variantFunctionalConsequence (SO terms
#  like absent_gene_product), studyId (e.g., DD for developmental disorders),
#  and extensive literature PMIDs. Uses standard pagination with size
#  parameter and returns count field. enableIndirect=true allows related
#  disease matches.
#
# Last Updated: 2025-11-21
query Gene2PhenotypeQuery(
  $ensemblId: String!
  $efoId: String!
  $size: Int!
) {
  # Return a Disease
  disease(efoId: $efoId) {
    # Open Targets disease id
    id
    # The complete list of all possible datasources
    gene2Phenotype: evidences(
      ensemblIds: [$ensemblId]
      enableIndirect: true
      datasourceIds: ["gene2phenotype"]
      size: $size
    ) {
      count
      rows {
        # Evidence identifier
        id
        # Disease evidence
        disease {
          # Open Targets disease id
          id
          # Disease name
          name
        }
        diseaseFromSource
        allelicRequirements
        confidence
        studyId
        targetFromSourceId
        # Target evidence
        target {
          # HGNC approved symbol
          approvedSymbol
        }
        variantFunctionalConsequence {
          id
          label
        }
        # list of pub med publications ids
        literature
      }
    }
  }
}
