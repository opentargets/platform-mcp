# Query Name: ClingenQuery
# Entity Type: evidence
# Description:
# Fetches ClinGen evidence for a target-disease association, including disease
#  information, allelic requirements, study IDs, confidence classifications
#  (e.g., Definitive, Strong, Moderate), and source URLs to GenCC
# Variables:
# ensemblId: String! (Example: ENSG00000157764), efoId: String! (Example:
#  EFO_0000756), size: Int! (Example: 10)
# Pagination Behavior: Paginated (returns X/page, total varies)
# Notes:
# Query executes successfully with valid syntax. Tested with BRAF
#  (ENSG00000157764) + melanoma (EFO_0000756), returned count=0 (no ClinGen
#  data for this pair). Query structure validated by testing with intogen
#  datasource which returned 8 rows with correct field structure. ClinGen
#  datasource is sparse and primarily covers Mendelian genetic disease
#  associations. Includes fields for disease names, diseaseFromSource,
#  allelicRequirements (inheritance patterns), studyId, confidence
#  classifications per GenCC Guidelines, and urls to source records. Uses
#  standard pagination with size parameter. Related to
#  ClinGenSummaryFragment.gql which fetches only count for summary display.
#
# Last Updated: 2025-11-21
query ClingenQuery($ensemblId: String!, $efoId: String!, $size: Int!) {
  # Return a Disease
  disease(efoId: $efoId) {
    # Open Targets disease id
    id
    # The complete list of all possible datasources
    clingenSummary: evidences(
      ensemblIds: [$ensemblId]
      enableIndirect: true
      datasourceIds: ["clingen"]
      size: $size
    ) {
      count
      rows {
        # Disease evidence
        disease {
          # Open Targets disease id
          id
          # Disease name
          name
        }
        diseaseFromSource
        allelicRequirements
        studyId
        confidence
        urls {
          url
        }
      }
    }
  }
}
