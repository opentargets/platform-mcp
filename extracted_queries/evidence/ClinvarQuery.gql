# Query Name: ClinvarQuery
# Entity Type: evidence
# Description:
# Fetches ClinVar evidence data for a target-disease association, including
#  variant information, clinical significance, allele origins, and literature
#  references
# Variables:
# ensemblId: String! (Example: ENSG00000157764), efoId: String! (Example:
#  EFO_0000756), size: Int! (Example: 25), cursor: String (optional)
# Pagination Behavior: Paginated (cursor-based, returns cursor field for next page)
# Notes:
# Query executes successfully. Tested with BRAF (ENSG00000157764) + melanoma
#  (EFO_0000756), returned count=2 with 2 ClinVar evidence entries. Both
#  variants are pathogenic missense_variants (rs180177042 and rs869025340)
#  with germline allele origins and single submitter confidence. Cursor-based
#  pagination confirmed working with size=1 test returning different cursors
#  for each page. Returns comprehensive variant details including HGVS IDs,
#  chromosomal positions, functional consequences, clinical significances,
#  allelic requirements, confidence levels (review status), and cohort
#  phenotypes. When cursor is null on response, indicates last page of
#  results.
#
# Last Updated: 2025-11-21
query ClinvarQuery($ensemblId: String!, $efoId: String!, $size: Int!, $cursor: String) {
  # Return a Target
  target(ensemblId: $ensemblId) {
    # HGNC approved symbol
    approvedSymbol
  }
  # Return a Disease
  disease(efoId: $efoId) {
    # Open Targets disease id
    id
    # Disease name
    name
    # The complete list of all possible datasources
    eva: evidences(
      ensemblIds: [$ensemblId]
      enableIndirect: true
      datasourceIds: ["eva"]
      size: $size
      cursor: $cursor
    ) {
      cursor
      count
      rows {
        # Disease evidence
        disease {
          # Open Targets disease id
          id
          # Disease name
          name
        }
        variant {
          id
          hgvsId
          chromosome
          position
          referenceAllele
          alternateAllele
        }
        # Variant effect
        variantEffect
        # Direction On Trait
        directionOnTrait
        diseaseFromSource
        # Variant dbSNP identifier
        variantRsId
        studyId
        variantFunctionalConsequence {
          id
          label
        }
        clinicalSignificances
        allelicRequirements
        alleleOrigins
        confidence
        # list of pub med publications ids
        literature
        cohortPhenotypes
      }
    }
  }
}
