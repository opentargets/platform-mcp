# Query Name: OrphanetQuery
# Entity Type: evidence
# Description:
# Fetches detailed Orphanet evidence for a target-disease pair, including rare
#  disease genetic associations with disease mappings, variant effects,
#  directionality, allele origins, functional consequences, and confidence
#  levels. Returns paginated evidence records from the Orphanet datasource.
# Variables:
# ensemblId: String! (Example: ENSG00000198947), efoId: String! (Example:
#  EFO_0000508), size: Int! (Example: 10)
# Pagination Behavior: Paginated (returns X/page based on size parameter, total count varies)
# Notes:
# Query successfully tested with BRAF (ENSG00000157764) + melanoma
#  (EFO_0000756), returned count=0 (expected - Orphanet focuses on rare
#  diseases). Also tested with DMD (ENSG00000198947) + genetic disorder
#  (EFO_0000508), returned count=5 with complete evidence records including
#  target (id, approvedSymbol), disease (id, name), variantEffect (null in
#  test), directionOnTrait (risk), diseaseFromSource (Duchenne muscular
#  dystrophy, Becker muscular dystrophy, etc.), diseaseFromSourceId
#  (Orphanet_98896, Orphanet_98895, etc.), diseaseFromSourceMappedId (MONDO
#  IDs and EFO IDs), targetFromSource (dystrophin), targetFromSourceId
#  (ENSG00000198947), alleleOrigins ([germline]), confidence (Assessed),
#  literature (PMIDs: 23900271, 14567970, 20301486), and
#  variantFunctionalConsequence (null in test). Uses standard offset-based
#  pagination with size parameter controlling rows per page. Returns count
#  field showing total available evidence and rows array with paginated
#  results. Query structure includes enableIndirect=true to include related
#  disease evidence and datasourceIds=['orphanet'] to target Orphanet data
#  specifically. Related to OrphanetSummaryFragment.gql which fetches only
#  count (with size=0) for efficient summary display in section header.
#  Orphanet specializes in rare/genetic disease gene-phenotype associations
#  with curated confidence levels and literature references. Common cancer or
#  non-rare disease associations typically return count=0.
#
# Last Updated: 2025-11-21
query OrphanetQuery($ensemblId: String!, $efoId: String!, $size: Int!) {
  # Return a Target
  target(ensemblId: $ensemblId) {
    # HGNC approved symbol
    approvedSymbol
  }
  # Return a Disease
  disease(efoId: $efoId) {
    # Open Targets disease id
    id
    # The complete list of all possible datasources
    orphanetSummary: evidences(
      ensemblIds: [$ensemblId]
      enableIndirect: true
      datasourceIds: ["orphanet"]
      size: $size
    ) {
      count
      rows {
        # Target evidence
        target {
          # Open Targets target id
          id
          # HGNC approved symbol
          approvedSymbol
        }
        # Disease evidence
        disease {
          # Open Targets disease id
          id
          # Disease name
          name
        }
        # Variant effect
        variantEffect
        # Direction On Trait
        directionOnTrait
        diseaseFromSource
        diseaseFromSourceId
        diseaseFromSourceMappedId
        targetFromSource
        targetFromSourceId
        alleleOrigins
        confidence
        # list of pub med publications ids
        literature
        variantFunctionalConsequence {
          id
          label
        }
      }
    }
  }
}
