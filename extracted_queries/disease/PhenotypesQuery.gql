# Query Name: PhenotypesQuery
# Entity Type: disease
# Description:
# Retrieves paginated phenotype data (clinical signs and symptoms) for a
#  disease, including HPO and EFO phenotype mappings with detailed evidence
#  annotations (aspect, bioCuration, evidence type, frequency, onset,
#  modifiers, references, sex, resource)
# Variables: efoId: String!, index: Int! (default: 0), size: Int! (default: 10)
# Pagination Behavior: Paginated (uses page parameter with size and index, returns count field)
# Notes:
# Query successfully tested with EFO_0000685 (rheumatoid arthritis). Returns
#  count=16 phenotypes with complete HPO/EFO annotations and evidence details.
#  Each phenotype includes HPO ID/name/description/namespace, EFO mapping, and
#  evidence array with aspect (P/I/C/M/H), bioCuration, diseaseFromSource,
#  evidenceType (IEA/PCS/TAS), frequency, frequencyHPO, qualifierNot, onset,
#  modifiers, references (PMIDs), sex, and resource fields. Uses standard
#  pagination via page.size and page.index parameters.
#
# Last Updated: 2025-11-21
query PhenotypesQuery($efoId: String!, $index: Int! = 0, $size: Int! = 10) {
  # Return a Disease
  disease(efoId: $efoId) {
    # Open Targets disease id
    id
    # Phenotype from HPO index
    phenotypes(page: { index: $index, size: $size }) {
      # Number of entries
      count
      # List of Disease and phenotypes annotations
      rows {
        # Phenotype entity
        phenotypeHPO {
          # Open Targets hpo id
          id
          # Phenotype name
          name
          # Phenotype description
          description
          # namespace
          namespace
        }
        # Disease Entity
        phenotypeEFO {
          # Open Targets disease id
          id
          # Disease name
          name
        }
        # List of phenotype annotations.
        evidence {
          # One of P (Phenotypic abnormality), I (inheritance), C (onset and clinical course). Might be null (MONDO)
          aspect
          # This refers to the center or user making the annotation and the date on which the annotation was made
          bioCuration
          # This field refers to the database and database identifier. EG. OMIM
          diseaseFromSourceId
          # Related name from the field diseaseFromSourceId
          diseaseFromSource
          # This field indicates the level of evidence supporting the annotation.
          evidenceType
          # A term-id from the HPO-sub-ontology
          frequency
          # HPO Entity
          frequencyHPO {
            # Phenotype name
            name
            # Open Targets hpo id
            id
          }
          # This optional field can be used to qualify the annotation. Values: [True or False]
          qualifierNot
          # A term-id from the HPO-sub-ontology below the term Age of onset.
          onset {
            # Phenotype name
            name
            # Open Targets hpo id
            id
          }
          # HP terms from the Clinical modifier subontology
          modifiers {
            # Phenotype name
            name
            # Open Targets hpo id
            id
          }
          # This field indicates the source of the information used for the annotation (phenotype.hpoa)
          references
          # This field contains the strings MALE or FEMALE if the annotation in question is limited to males or females.
          sex
          # Possible source mapping: HPO or MONDO
          resource
        }
      }
    }
  }
}
