# Query Name: VariantEffectPredictorQuery
# Entity Type: variant
# Description:
# Fetches transcript consequences and variant effect predictions for a genetic
#  variant, including predicted functional impacts, amino acid changes, gene
#  targets, and in-silico predictions from SIFT, PolyPhen, and LOFTEE tools.
# Variables: variantId: String! (Example: 19_44908822_C_T)
# Pagination Behavior: Full results
# Notes:
# Query successfully tested with variants 19_44908822_C_T (rs7412, APOE
#  variant) returned 63 transcript consequences and 1_113761186_C_A returned
#  21 transcript consequences. No pagination - returns all transcript
#  consequences in single response as array. Response includes variant object
#  with id (variant identifier in chr_pos_ref_alt format), referenceAllele,
#  alternateAllele, and transcriptConsequences array. Each transcript
#  consequence contains: variantConsequences array with consequence type
#  objects (id: Sequence Ontology term like SO:0001583 for missense_variant,
#  label: formatted consequence name), aminoAcidChange (e.g., R176C for
#  rs7412, null for non-coding), uniprotAccessions array (UniProt accession
#  IDs for affected proteins), codons (reference/alternate codon like Cgc/Tgc,
#  null for non-coding), distanceFromFootprint (distance in bp from regulatory
#  footprint, 0 for coding variants), distanceFromTss (distance in bp from
#  transcription start site, negative if downstream), target object (id:
#  Ensembl gene ID, approvedSymbol: gene symbol, biotype: gene type like
#  protein_coding/lncRNA/pseudogene), impact (VEP impact rating:
#  MODIFIER/MODERATE/HIGH/LOW), consequenceScore (numeric score 0-1
#  representing predicted severity, 0.66 for R176C missense), transcriptIndex
#  (integer for sorting transcripts), transcriptId (Ensembl transcript ID like
#  ENST00000252486), lofteePrediction (Loss-Of-Function Transcript Effect
#  Estimator prediction or null), siftPrediction (SIFT deleterious prediction
#  score or null), polyphenPrediction (PolyPhen-2 pathogenicity prediction or
#  null). Test data for rs7412 (19_44908822_C_T): clinically important APOE
#  variant showed 63 transcript consequences across nearby genes, with the key
#  missense_variant (SO:0001583) in APOE gene (ENSG00000130203) causing R176C
#  amino acid change (Arginine to Cysteine at position 176), codons Cgc/Tgc,
#  impact=MODERATE, consequenceScore=0.66, transcriptId=ENST00000252486,
#  uniprotAccessions=[P02649, A0A0S2Z3D5], distanceFromFootprint=0,
#  distanceFromTss=-3026, with remaining 62 consequences being
#  upstream_gene_variant or downstream_gene_variant modifiers in nearby genes
#  (CBLC, NECTIN2, ZNF296, etc). Most consequences have impact=MODIFIER with
#  consequenceScore=0 and null predictions. Test data for 1_113761186_C_A:
#  returned 21 transcript consequences all of which are
#  downstream_gene_variant or upstream_gene_variant modifiers with no coding
#  impacts (all aminoAcidChange=null, impact=MODIFIER, consequenceScore=0). No
#  fragments to inline - query is standalone. Used in VariantEffectPredictor
#  section Body.tsx component which displays sortable table with columns: Gene
#  (links to target page, shows biotype chip for protein_coding genes, tooltip
#  with canonical transcript ID and UniProt accession IDs), Predicted
#  consequence (shows variant consequence labels as Sequence Ontology links,
#  displays amino acid change chip, tooltip with codon change), Impact
#  (lowercase impact level), Distance from footprint (formatted with commas),
#  and Distance from start site (formatted with commas). Rows are sorted by
#  transcriptIndex field to maintain consistent ordering. Query includes
#  referenceAllele and alternateAllele fields used in Description component.
#  The in-silico prediction fields (lofteePrediction, siftPrediction,
#  polyphenPrediction) are returned but appear to be null in test data - may
#  be populated for other variants. This implements Variant Effect Predictor
#  (VEP) annotations showing how variants affect genes and transcripts.
#
# Last Updated: 2025-11-21
query VariantEffectPredictorQuery($variantId: String!) {
  # Return a Variant
  variant(variantId: $variantId) {
    id
    transcriptConsequences {
      # Most severe consequence sequence ontology
      variantConsequences {
        id
        label
      }
      aminoAcidChange
      uniprotAccessions
      codons
      distanceFromFootprint
      distanceFromTss
      # Target
      target {
        # Open Targets target id
        id
        # HGNC approved symbol
        approvedSymbol
        # Molecule biotype
        biotype
      }
      impact
      consequenceScore
      transcriptIndex
      transcriptId
      lofteePrediction
      siftPrediction
      polyphenPrediction
    }
    referenceAllele
    alternateAllele
  }
}
