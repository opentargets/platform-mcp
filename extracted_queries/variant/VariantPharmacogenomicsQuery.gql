# Query Name: VariantPharmacogenomicsQuery
# Entity Type: variant
# Description:
# Fetches pharmacogenomics (PharmGKB) clinical annotations for a genetic
#  variant including drug response phenotypes genotypes associated drugs
#  variant annotations with effect descriptions confidence levels and
#  supporting literature.
# Variables: variantId: String!
# Pagination Behavior: Full results
# Notes:
# Query successfully tested with 19_44908822_C_T (APOE rs7412), returns
#  pharmacogenomics data.
#
# Last Updated: 2025-11-21
query VariantPharmacogenomicsQuery($variantId: String!) {
  # Return a Variant
  variant(variantId: $variantId) {
    id
    referenceAllele
    alternateAllele
    # Pharmoacogenomics
    pharmacogenomics {
      variantAnnotation {
        # Entity affected by the effect.
        entity
        # Allele observed effect.
        effect
        # Type of effect.
        effectType
        # Summary of the impact of the allele on the drug response.
        effectDescription
        # PMID of the supporting publication.
        literature
        # Allele directionality of the effect.
        directionality
        # Allele or genotype in the base case.
        baseAlleleOrGenotype
        # Allele or genotype in the comparison case.
        comparisonAlleleOrGenotype
      }
      genotypeId
      isDirectTarget
      # Target entity
      target {
        # Open Targets target id
        id
        # HGNC approved symbol
        approvedSymbol
      }
      # Drug List
      drugs {
        drugFromSource
        drugId
      }
      phenotypeFromSourceId
      genotypeAnnotationText
      phenotypeText
      pgxCategory
      evidenceLevel
      studyId
      literature
    }
  }
}
