# Query Name: MolecularStructureQuery
# Entity Type: variant
# Description:
# Fetches protein coding coordinates and amino acid information for a variant
#  to display molecular structure visualization with 3D protein models.
# Variables: variantId: String! (Example: 19_44908822_C_T)
# Pagination Behavior: Full results
# Notes:
# Query successfully tested with variants 19_44908822_C_T (rs7412, APOE
#  variant) and 1_113761186_C_A. No pagination - returns all protein coding
#  coordinates in single response. For rs7412: returned count=1 with
#  proteinCodingCoordinates containing 1 row with uniprotAccessions [P02649],
#  target ENSG00000130203 (APOE), referenceAminoAcid R, alternateAminoAcid C,
#  aminoAcidPosition 176 (R176C missense variant). For 1_113761186_C_A:
#  returned count=0 with empty rows array, indicating variant does not affect
#  protein coding sequence. Response includes variant object with id,
#  referenceAllele, alternateAllele, and proteinCodingCoordinates object
#  containing count (total number of affected proteins) and rows array. Each
#  row contains: uniprotAccessions (array of UniProt accession IDs for the
#  affected protein), variant object (id field with variant identifier),
#  target object (id: Ensembl gene ID, approvedSymbol: gene symbol),
#  referenceAminoAcid (original amino acid at position), alternateAminoAcid
#  (variant amino acid, "-" for synonymous), aminoAcidPosition (position in
#  protein sequence). No fragments to inline. Used in MolecularStructure
#  section Body.tsx component which displays 3D protein structure
#  visualization using the first proteinCodingCoordinates row. Component
#  accesses row[0] for uniprotAccession, target id/approvedSymbol, and creates
#  variantSummary string from referenceAminoAcid + aminoAcidPosition +
#  alternateAminoAcid (e.g., R176C for rs7412). Section only displays when
#  count > 0 and referenceAminoAcid !== "-" (excluding synonymous variants).
#  The StructureViewer component uses UniProt accession to fetch 3D protein
#  structure from AlphaFold or PDB and highlights the variant position in the
#  molecular visualization. Clinically relevant example rs7412 (APOE R176C) is
#  a well-characterized variant associated with APOE2 isoform affecting
#  cholesterol metabolism and Alzheimer's disease risk. Related to
#  MolecularStructureSummary fragment (not yet extracted) which provides count
#  for section visibility check.
#
# Last Updated: 2025-11-21
query MolecularStructureQuery($variantId: String!) {
  # Return a Variant
  variant(variantId: $variantId) {
    id
    referenceAllele
    alternateAllele
    # Protein coding coordinates
    proteinCodingCoordinates {
      count
      rows {
        uniprotAccessions
        # Variant
        variant {
          id
        }
        # Target
        target {
          # Open Targets target id
          id
          # HGNC approved symbol
          approvedSymbol
        }
        referenceAminoAcid
        alternateAminoAcid
        aminoAcidPosition
      }
    }
  }
}
