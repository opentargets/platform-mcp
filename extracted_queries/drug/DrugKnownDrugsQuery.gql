# Query Name: DrugKnownDrugsQuery
# Entity Type: drug
# Description:
# Retrieves known drugs for a drug molecule including disease indications
#  clinical trial phases mechanisms of action drug types and reference URLs.
#  Supports pagination and free text search filtering.
# Variables:
# chemblId: String!, cursor: String, freeTextQuery: String, size: Int
#  (default: 10)
# Pagination Behavior: Paginated (cursor-based, 10/page default)
# Notes:
# Query successfully tested with CHEMBL1201585 (TRASTUZUMAB), returned
#  count=239 known drug-disease associations.
#
# Last Updated: 2025-11-21
query DrugKnownDrugsQuery(
  $chemblId: String!
  $cursor: String
  $freeTextQuery: String
  $size: Int = 10
) {
  # Return a drug
  drug(chemblId: $chemblId) {
    # Open Targets molecule id
    id
    # Curated Clinical trial records and and post-marketing package inserts with a known mechanism of action
    knownDrugs(cursor: $cursor, freeTextQuery: $freeTextQuery, size: $size) {
      # Total number of entries
      count
      cursor
      # Clinical precedence entries with known mechanism of action
      rows {
        # Clinical Trial phase
        phase
        # Trial status
        status
        # Source urls from clinical trials
        urls {
          # resource name
          name
          # resource url
          url
        }
        # Curated disease indication entity
        disease {
          # Open Targets disease id
          id
          # Disease name
          name
        }
        # Drug target entity based on curated mechanism of action
        target {
          # Open Targets target id
          id
          # Approved gene name
          approvedName
          # HGNC approved symbol
          approvedSymbol
        }
      }
    }
  }
}
